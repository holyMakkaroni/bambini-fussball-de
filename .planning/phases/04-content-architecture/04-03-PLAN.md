---
phase: 04-content-architecture
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified:
  - bambini-fussball/package.json
  - bambini-fussball/src/layouts/ArticleLayout.astro
  - bambini-fussball/src/pages/trainer/[id].astro
  - bambini-fussball/src/pages/eltern/[id].astro
  - bambini-fussball/src/pages/vereine/[id].astro
  - bambini-fussball/src/content/trainer/beispiel-artikel.md
autonomous: true

must_haves:
  truths:
    - "User can view individual article pages"
    - "Breadcrumb navigation shows Home > Category > Article title"
    - "Markdown content renders as HTML on article pages"
    - "Articles are accessible from category listing pages"
  artifacts:
    - path: "bambini-fussball/src/layouts/ArticleLayout.astro"
      provides: "Article page layout with breadcrumbs"
      contains: "Breadcrumbs"
    - path: "bambini-fussball/src/pages/trainer/[id].astro"
      provides: "Dynamic trainer article routes"
      contains: "getStaticPaths"
    - path: "bambini-fussball/src/pages/eltern/[id].astro"
      provides: "Dynamic eltern article routes"
      contains: "getStaticPaths"
    - path: "bambini-fussball/src/pages/vereine/[id].astro"
      provides: "Dynamic vereine article routes"
      contains: "getStaticPaths"
    - path: "bambini-fussball/src/content/trainer/beispiel-artikel.md"
      provides: "Test article for verification"
      contains: "title:"
  key_links:
    - from: "bambini-fussball/src/pages/trainer/[id].astro"
      to: "bambini-fussball/src/layouts/ArticleLayout.astro"
      via: "import and use as wrapper"
      pattern: "ArticleLayout"
    - from: "bambini-fussball/src/layouts/ArticleLayout.astro"
      to: "astro-breadcrumbs"
      via: "import Breadcrumbs component"
      pattern: "astro-breadcrumbs"
---

<objective>
Create article layout with breadcrumb navigation and dynamic routes for all categories.

Purpose: Enable markdown content to render as article pages with proper navigation hierarchy (Home > Category > Article).

Output: ArticleLayout with breadcrumbs, dynamic [id].astro routes for all three categories, and a test article to verify the complete flow.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-content-architecture/04-RESEARCH.md

Key patterns from research:
- Import { render } from 'astro:content' (not article.render() method)
- Use article.id for routes (not slug - Astro 5 change)
- astro-breadcrumbs provides Schema.org JSON-LD automatically
- Use schemaJsonScript={true} for SEO benefit
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install astro-breadcrumbs package</name>
  <files>bambini-fussball/package.json</files>
  <action>
Install the astro-breadcrumbs package for breadcrumb navigation with Schema.org support:

```bash
cd bambini-fussball && npm install astro-breadcrumbs
```

WHY: Don't hand-roll breadcrumbs. This package provides Schema.org JSON-LD structured data, accessibility features, and truncation support out of the box.
  </action>
  <verify>Check package.json contains "astro-breadcrumbs" in dependencies</verify>
  <done>astro-breadcrumbs package installed</done>
</task>

<task type="auto">
  <name>Task 2: Create ArticleLayout with breadcrumbs</name>
  <files>bambini-fussball/src/layouts/ArticleLayout.astro</files>
  <action>
Create ArticleLayout.astro that wraps article content with breadcrumb navigation:

```astro
---
// src/layouts/ArticleLayout.astro
import BaseLayout from './BaseLayout.astro';
import { Breadcrumbs } from 'astro-breadcrumbs';
import 'astro-breadcrumbs/breadcrumbs.css';

interface Props {
  title: string;
  description: string;
  category: 'trainer' | 'eltern' | 'vereine';
  pubDate: Date;
  author: string;
}

const { title, description, category, pubDate, author } = Astro.props;

// Category labels in German
const categoryLabels = {
  trainer: 'Trainer',
  eltern: 'Eltern',
  vereine: 'Vereine'
};

// Custom breadcrumb items for semantic clarity
const crumbs = [
  { text: 'Startseite', href: '/' },
  { text: categoryLabels[category], href: `/${category}/` },
  { text: title, href: '#', 'aria-current': 'page' as const }
];
---

<BaseLayout title={`${title} | Bambini-Fussball`} description={description}>
  <main class="flex-1 container mx-auto px-4 py-8">
    <nav class="mb-6" aria-label="Breadcrumb">
      <Breadcrumbs
        crumbs={crumbs}
        indexText="Startseite"
        schemaJsonScript={true}
      />
    </nav>

    <article class="prose prose-lg max-w-3xl mx-auto">
      <header class="mb-8 not-prose">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">{title}</h1>
        <div class="flex items-center gap-4 text-sm text-gray-600">
          <span>Von {author}</span>
          <span aria-hidden="true">|</span>
          <time datetime={pubDate.toISOString()}>
            {pubDate.toLocaleDateString('de-DE', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </time>
        </div>
      </header>

      <div class="article-content">
        <slot />
      </div>
    </article>
  </main>
</BaseLayout>

<style is:global>
  /* Breadcrumb styling to match site design */
  .c-breadcrumbs {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.875rem;
  }

  .c-breadcrumbs__crumb {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .c-breadcrumbs__link {
    color: #4b5563;
    text-decoration: none;
  }

  .c-breadcrumbs__link:hover {
    color: #15803d;
    text-decoration: underline;
  }

  .c-breadcrumbs__link--current {
    color: #6b7280;
    pointer-events: none;
  }

  .c-breadcrumbs__separator {
    color: #9ca3af;
  }

  /* Article prose styling */
  .article-content h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    font-weight: 600;
    color: #111827;
  }

  .article-content h3 {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    font-size: 1.25rem;
    font-weight: 600;
    color: #1f2937;
  }

  .article-content p {
    margin-bottom: 1rem;
    line-height: 1.75;
    color: #374151;
  }

  .article-content ul, .article-content ol {
    margin-bottom: 1rem;
    padding-left: 1.5rem;
  }

  .article-content li {
    margin-bottom: 0.5rem;
  }
</style>
```

Key details:
- Uses astro-breadcrumbs for Schema.org JSON-LD (SEO benefit)
- schemaJsonScript={true} enables structured data
- Custom crumbs array for German labels (Startseite, not Home)
- Article prose styling for markdown content readability
- German date formatting
- flex-1 on main for proper footer positioning

WHY: Breadcrumbs satisfy CONT-03 requirement and improve SEO through structured data.
  </action>
  <verify>File exists with Breadcrumbs import and crumbs array</verify>
  <done>ArticleLayout.astro created with breadcrumb navigation, Schema.org JSON-LD, and article styling</done>
</task>

<task type="auto">
  <name>Task 3: Create dynamic article routes and test article</name>
  <files>bambini-fussball/src/pages/trainer/[id].astro, bambini-fussball/src/pages/eltern/[id].astro, bambini-fussball/src/pages/vereine/[id].astro, bambini-fussball/src/content/trainer/beispiel-artikel.md</files>
  <action>
Create dynamic routes for each category and a test article.

1. Create bambini-fussball/src/pages/trainer/[id].astro:
```astro
---
import { getCollection, render } from 'astro:content';
import ArticleLayout from '../../layouts/ArticleLayout.astro';

export async function getStaticPaths() {
  const articles = await getCollection('trainer');
  return articles.map((article) => ({
    params: { id: article.id },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await render(article);
---

<ArticleLayout
  title={article.data.title}
  description={article.data.description}
  category="trainer"
  pubDate={article.data.pubDate}
  author={article.data.author}
>
  <Content />
</ArticleLayout>
```

2. Create bambini-fussball/src/pages/eltern/[id].astro:
- Same structure as trainer
- Change collection to 'eltern'
- Change category prop to "eltern"

3. Create bambini-fussball/src/pages/vereine/[id].astro:
- Same structure as trainer
- Change collection to 'vereine'
- Change category prop to "vereine"

4. Create test article bambini-fussball/src/content/trainer/beispiel-artikel.md:
```markdown
---
title: "Beispielartikel: Ubungen fur die ersten Trainingseinheiten"
description: "Ein Testbeitrag um die Content-Architektur zu verifizieren. Grundlegende Ubungen fur den Einstieg ins Bambini-Training."
pubDate: 2026-01-22
author: "Redaktion"
---

# Willkommen zum Bambini-Training

Dies ist ein Beispielartikel, um die Content-Architektur zu testen.

## Wichtige Grundlagen

Beim Training mit Bambinis (4-6 Jahre) stehen Spass und Bewegung im Vordergrund. Kinder in diesem Alter lernen am besten durch:

- Spielerische Ubungen
- Kurze Erklarungen
- Viel Bewegung
- Positive Verstarkung

## Erste Ubung: Dribbel-Parcours

Eine einfache Ubung fur den Einstieg:

1. Markieren Sie einen kleinen Parcours mit Hutchen
2. Jedes Kind erhalt einen Ball
3. Die Kinder dribbeln frei durch den Parcours
4. Variation: Auf Signal anhalten und den Ball stoppen

### Tipps fur Trainer

Halten Sie die Erklarungen kurz. Bambinis haben eine begrenzte Aufmerksamkeitsspanne. Zeigen Sie die Ubung vor, anstatt lange zu erklaren.

## Zusammenfassung

Dieser Artikel dient als Testinhalt fur die technische Uberprufung der Content-Architektur.
```

Key details:
- Use render() as standalone import (Astro 5 pattern)
- Use article.id in getStaticPaths (not slug)
- Test article has realistic structure with h2, h3, lists, paragraphs

WHY: Dynamic routes enable the pillar-cluster architecture. Test article verifies the complete flow from Markdown to rendered page.
  </action>
  <verify>
Run `npm run build` - should complete without errors.
Visit http://localhost:4321/trainer/ - should show "Beispielartikel" in listing.
Visit http://localhost:4321/trainer/beispiel-artikel/ - should render full article with breadcrumbs.
  </verify>
  <done>Dynamic [id].astro routes created for all three categories, test article renders with breadcrumbs</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. http://localhost:4321/trainer/ shows test article in listing
3. http://localhost:4321/trainer/beispiel-artikel/ renders article
4. Breadcrumb shows: Startseite > Trainer > Beispielartikel...
5. View page source: JSON-LD script with BreadcrumbList schema present
6. Markdown headings, lists, paragraphs render correctly
7. Navigation links in header still work on article page
</verification>

<success_criteria>
- astro-breadcrumbs package installed
- ArticleLayout exists with breadcrumb navigation
- Dynamic routes exist for /trainer/[id]/, /eltern/[id]/, /vereine/[id]/
- Test article renders at /trainer/beispiel-artikel/
- Breadcrumbs show correct hierarchy (Home > Category > Article)
- JSON-LD BreadcrumbList schema present in page source
</success_criteria>

<output>
After completion, create `.planning/phases/04-content-architecture/04-03-SUMMARY.md`
</output>
